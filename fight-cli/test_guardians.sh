#!/bin/bash
# Test the Skill Guardian system with Tracking and Auto-Spawning

echo "ğŸ›¡ï¸  Testing Skill Guardian System + Tracking..."
echo ""

# Build
echo "Building..."
go build -o fight-cli fight-cli.go

if [ $? -ne 0 ]; then
    echo "âŒ Build failed!"
    exit 1
fi

echo "âœ… Build successful!"
echo ""

# Run basic tests
echo "Running tests..."
go test -run "TestCharacterCreation|TestSkills" -v

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ® NEW FEATURES READY TO TEST!"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âœ¨ TRACKING SKILL"
echo "  â€¢ Learn from a Skill Guardian"
echo "  â€¢ See all monsters at a location"
echo "  â€¢ Choose which monster to fight"
echo "  â€¢ Identify guardians with ğŸ¯ tag"
echo ""
echo "ğŸ¯ AUTOMATIC GUARDIAN SPAWNING"
echo "  â€¢ Guardians spawn based on location level"
echo "  â€¢ Level 10-29:  1 guardian"
echo "  â€¢ Level 30-99:  2 guardians"
echo "  â€¢ Level 100+:   3 guardians"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“‹ TESTING STEPS"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "1. START GAME"
echo "   ./fight-cli"
echo ""
echo "2. VIEW GUARDIAN SPAWNS"
echo "   â€¢ Select option 4 (Print Discovered Locations)"
echo "   â€¢ Look for guardian spawn messages:"
echo "     ğŸ¯ Spawned Fire Elemental (Lv48) guarding Fireball at Hunters Lodge"
echo "   â€¢ Check guardian counts per location"
echo ""
echo "3. TEST WITHOUT TRACKING"
echo "   â€¢ Create/Load character"
echo "   â€¢ Select option 3 (Hunt)"
echo "   â€¢ Choose location (e.g., Training Hall)"
echo "   â€¢ Enter hunt count (e.g., 1)"
echo "   â€¢ Random monster selected (original behavior)"
echo ""
echo "4. LEARN TRACKING SKILL"
echo "   â€¢ Hunt at location with guardians"
echo "   â€¢ Defeat a Skill Guardian"
echo "   â€¢ Choose to absorb Tracking skill (if available)"
echo "   â€¢ Or keep hunting until you find Tracking guardian"
echo ""
echo "5. TEST WITH TRACKING"
echo "   â€¢ Select option 3 (Hunt)"
echo "   â€¢ Choose location"
echo "   â€¢ Enter hunt count"
echo "   â€¢ See monster selection menu:"
echo "     ğŸ” TRACKING ACTIVE - Choose your target:"
echo "     1. slime (Lv12) - HP:6/6"
echo "     2. goblin (Lv15) - HP:8/8"
echo "     3. Fire Elemental (Lv18) - HP:24/24 ğŸ¯ [SKILL GUARDIAN]"
echo "   â€¢ Choose a number (1-20) or 0 for random"
echo "   â€¢ Verify correct monster is fought"
echo ""
echo "6. TEST GUARDIAN FIGHTS"
echo "   â€¢ With Tracking, choose a guardian"
echo "   â€¢ Verify tougher fight (2x HP, +2 rolls)"
echo "   â€¢ On victory, get skill choice:"
echo "     1 = Absorb skill immediately"
echo "     2 = Take skill scroll"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ” EXPECTED RESULTS"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âœ“ Training Hall (LvMax 20) â†’ 0 guardians"
echo "âœ“ Forest (LvMax 20) â†’ 0 guardians"
echo "âœ“ Hunters Lodge (LvMax 50) â†’ 1 guardian"
echo "âœ“ Forest Ruins (LvMax 100) â†’ 2 guardians"
echo "âœ“ Ancient Dungeon (LvMax 200) â†’ 3 guardians"
echo ""
echo "âœ“ Without Tracking: Random selection"
echo "âœ“ With Tracking: Selection menu appears"
echo "âœ“ Guardian tag visible in both views"
echo "âœ“ Can target specific monsters"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“š DOCUMENTATION"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Full docs available:"
echo "  â€¢ TRACKING_AND_GUARDIAN_SPAWNING.md - Complete guide"
echo "  â€¢ QUICK_REFERENCE.txt - Quick lookup"
echo "  â€¢ SKILL_GUARDIAN_SYSTEM.md - Guardian mechanics"
echo ""
echo "Read QUICK_REFERENCE.txt for fast tips!"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸš€ Ready to play!"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
